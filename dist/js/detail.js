"use strict";function asyncGeneratorStep(n,t,o,a,e,s,r){try{var c=n[s](r),u=c.value}catch(n){return void o(n)}c.done?t(u):Promise.resolve(u).then(a,e)}function _asyncToGenerator(c){return function(){var n=this,r=arguments;return new Promise(function(t,o){var a=c.apply(n,r);function e(n){asyncGeneratorStep(a,t,o,e,s,"next",n)}function s(n){asyncGeneratorStep(a,t,o,e,s,"throw",n)}e(void 0)})}}$(function(){var a=null,e=getCookie("goods_id");function n(){return(n=_asyncToGenerator(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.get("../server/getGoodsInfo.php",{goods_id:e},null,"json");case 2:o=n.sent,t=o.info,$(".goodsInfo").html('\n      <p class="desc">'.concat(t.goods_name,'</p>\n      <div class="btn-group size">\n        <button type="button" class="btn btn-default">S</button>\n        <button type="button" class="btn btn-default">M</button>\n        <button type="button" class="btn btn-default">L</button>\n        <button type="button" class="btn btn-default">XL</button>\n      </div>\n      <p class="price">\n        ￥ <span class="text-danger">').concat(t.goods_price,'</span>\n      </p>\n      <div class="num">\n        <button class="subNum">-</button>\n        <input type="text" value="1" class="cartNum">\n        <button class="addNum">+</button>\n      </div>\n      <div>\n        <button class="btn btn-success addCart">加入购物车</button>\n        <button class="btn btn-warning continue"><a href="./shop.html">继续去购物</a></button>\n      </div>\n    ')),$(".enlargeBox").html('\n      <div class="show">\n      <img src="'.concat(t.goods_img1,'" alt="">\n      <div class="mask"></div>\n      <div class="enlarge"></div>\n\n      </div>\n      <div class="list">\n        <p class="active">\n          <img src="').concat(t.goods_img1,'" alt="">\n        </p>\n      </div>\n\n    ')),$(".goodsDesc").html(t.goods_introduce),$(".enlarge").css({"background-image":"url(".concat(t.goods_img1,")")}),new Enlarge(".enlargeBox"),a=o.info;case 5:case"end":return n.stop()}var t},n)}))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),$(".goodsInfo").on("click",".addCart",function(){console.log("要开始了");var n,t=JSON.parse(window.localStorage.getItem("cart"))||[];t.some(function(n){return n.goods_id===e})?(n=t.filter(function(n){return n.goods_id===e})[0]).cart_number=+n.cart_number+ +$(".cartNum").val():(a.cart_number=1,t.push(a)),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".goodsInfo").on("click",".subNum",function(){var n=+$(".cartNum").val();1!=n&&$(".cartNum").val(n-1)}).on("click",".addNum",function(){var n=+$(".cartNum").val();$(".cartNum").val(1+n)})});